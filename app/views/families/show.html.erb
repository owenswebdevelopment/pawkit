<% content_for :body_class, "family-show-bg" %>
<div class="container py-5">
  <h2 class="text-center mb-4 display-5 text-white"><%= @family.name %></h2>
  <% if @family.photo.attached? %>
    <div class="text-center mb-4">
      <%= cl_image_tag @family.photo.key, width: 100, height: 100, crop: :fill, alt: "family photo", class: "img-fluid rounded-3" %>
    </div>
  <% end %>
  <div class='d-flex justify-content-center overflow-scroll mb-3 gap-3'>
    <% @family.pets.each do |pet| %>
      <div class="text-center">
        <%= link_to pet_path(pet)  do %>
          <% if pet.photo.attached? %>
            <%= cl_image_tag pet.photo.key, class: "rounded-circle img-fluid", style: "object-fit: cover; width: 80px; height: 80px;" %>
          <% else %>
            <%= image_tag asset_path("default-avatar.jpg"), class: "rounded-circle img-fluid", style: "object-fit: cover; width: 80px; height: 80px;" %>
          <% end %>
        <% end %>
        <p class="mt-2"><%= pet.name.capitalize %></p>
      </div>
    <% end %>
  </div>
  <!-- Create Task Button -->
  <div class="text-center mb-5">
    <%= link_to "Create Tasks", family_tasks_path(@family), class: "btn btn-success px-4 py-2" %>
  </div>
  <!-- Pets Info -->
  <% if @tasks.any? %>
    <div class="row row-cols-1 row-cols-md-3 g-3 mb-4">
      <% @tasks.each do |task| %>
        <div class="col">
          <div class="border rounded p-3 h-100 text-start">
            <h5 class="mb-1 text-white"><%= task.title %></h5>
            <p><small  class="mb-2 text-white"><%= task.description %></small></p>
            <small class="text-secondary">Due: <%= task.due_date.strftime("%B %d, %Y") %></small>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center mt-3 text-white">No tasks yet. Click below to create one!</p>
  <% end %>
  <div class="text-center mb-5">
    <%= link_to "Add Pet", new_family_pet_path(@family), class: "btn btn-success px-4 py-2" %>
  </div>
</div>
