<h2 class='text-center mb-5'>Medical Records</h2>
<div class="container text-center my-3">
  <button type="button" class="btn btn-primary position-relative" data-bs-toggle="modal" data-bs-target="#medicalrecordModal">
    Add Medical Record
  </button>
</div>
<%= render "medical_records/addmedicalrecord", pet: @pet, medical_record: @medical_record %>
<div class="d-flex flex-column mb-3 mx-4">
  <% if @pet.medical_records.any? %>
    <% @pet.medical_records.each do |medical_record| %>
      <div class="card p-2 border-3 my-1">
        <div class="card-body p-0 d-flex">
          <div class="card-image p-2" style="width: 88px">
            <% if @pet.photo.attached? %>
              <%= cl_image_tag @pet.photo.key, class: "rounded-circle img-fluid", style: "object-fit: cover; width: 60px; height: 60px;" %>
            <% else %>
              <%= image_tag asset_path("default-avatar.jpg"), class: "rounded-circle img-fluid", style: "object-fit: cover; width: 60px; height: 60px;" %>
            <% end %>
          </div>
          <div class="card-details p-2 flex-fill">
            <div class="d-flex justify-content-between">
              <h5 class="mb-3"><strong><i class="fa-solid fa-stethoscope me-2"></i><%= medical_record.diagnosis %></strong></h5>
            </div>
            <div class="p-2 d-flex justify-content-between">
              <h6 class="description"><i class="fa-solid fa-notes-medical me-2"></i><%= medical_record.notes.capitalize %></h6>
              <h6 class='description'><i class="fa-solid fa-calendar-days me-2"></i><%= medical_record.visit_date.strftime("%B %d, %Y") %></h6>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <p> No Medical Records available for this pet.</p>
  <% end %>
</div>
