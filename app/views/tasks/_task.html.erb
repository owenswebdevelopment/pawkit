<div id="task_<%= task.id %>"
     class="mb-4 task-card <%= 'task-completed' if task.completed %>">
  <div class="card shadow-sm border rounded-4 task-card-hover">
    <div class="card-body d-flex flex-wrap align-items-center p-3">
      <!-- Avatar -->
      <div class="me-3 mb-3 mb-md-0">
        <% if task.pet.photo.attached? %>
          <%= cl_image_tag task.pet.photo.key,
              class: "rounded-circle img-thumbnail",
              style: "object-fit: cover; width: 64px; height: 64px;" %>
        <% else %>
          <%= image_tag asset_path("default-avatar.jpg"),
              class: "rounded-circle img-thumbnail",
              style: "object-fit: cover; width: 64px; height: 64px;" %>
        <% end %>
      </div>
      <!-- Task Details -->
      <div class="flex-grow-1 me-3">
        <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap">
          <h5 class="fw-bold mb-0 text-primary"><%= task.title.capitalize %></h5>
          <% if task.completed %>
            <span class="badge bg-success text-end">Completed by: <%= task.completed_by&.first_name %></span>
          <% end %>
        </div>
        <p class="mb-1 text-muted"><%= task.description.capitalize.presence || "-" %></p>
        <small class="text-danger fw-semibold">Due: <%= task.due_date.strftime("%B %d, %Y") %></small>
      </div>
      <!-- Completion Switch -->
      <div class="form-check form-switch ms-auto d-flex align-items-center">
        <%= simple_form_for task, method: :patch, data: { turbo: true } do |f| %>
          <%= f.input :completed,
                      as: :boolean,
                      label: false,
                      wrapper_html: { class: "form-check" },
                      input_html: {
                        onchange: "this.form.requestSubmit();",
                        class: "form-check-input",
                        role: "switch",
                        style: "border-color:rgb(192, 192, 192); transition: background-color 0.3s ease-in-out, border-color 0.3s ease-in-out;"

                      } %>
        <% end %>
      </div>
    </div>
  </div>
</div>
